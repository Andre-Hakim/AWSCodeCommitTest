on: push
name: Publish Website
jobs:
  web-deploy:
    name: ðŸš€ Deploy To AWS
    runs-on: ubuntu-latest
    steps:
    - name: Install SSH Key
      uses: shimataro/ssh-key-action@v2.3.0 
      with: 
        key: ${{ secrets.SSH_KEY_AWS_TEST }}
        known_hosts: 'foo'
    - name: Adding Known Hosts
      run: ssh-keyscan -H ${{ secrets.PUBLICIP }}
    - name: Deploy with rsync
      run: rsync -avz ./AWSUploadTest ec2-user@${{ secrets.SSH_KEY_AWS_TEST }}:./home

    # - name: ðŸ“‚ Sync files
    #   uses: ./
    #   with:
    #     target-server: ${{ secrets.PUBLICIP }}
    #     remote-user: ec2-user
    #     remote-key: ${{ secrets.SSH_KEY_AWS_TEST }}
    #     source-path: ./AWSUploadTest
    #     destination-path: ./home/ec2-user/home
    #     rsync-options: --stats