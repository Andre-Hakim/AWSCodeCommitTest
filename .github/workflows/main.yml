on: push
name: Publish Website
jobs:
  web-deploy:
    name: ðŸš€ Deploy website every commit
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout
    
    - name: ðŸ“‚ Sync files
      uses: SamKirkland/web-deploy
      with:
        target-server: ${{ secrets.PUBLICIP }}
        remote-user: ec2-user
        remote-key: ${{ secrets.SSH_KEY_AWS_TEST }}
        source-path: ./home/
        destination-path: ./
        rsync-options: --insecure